<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Triangle Tactics Character Sheet</title>

    <!-- Normalize or reset CSS with your favorite library -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/7.0.0/normalize.min.css">

    <!-- Load paper.css for happy printing -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/paper-css/0.4.1/paper.css">
    
    <!-- Load custom styles -->
    <link rel="stylesheet" href="./styles.css">
    
    <!-- Set page size here: A5, A4 or A3 -->
    <!-- Set also "landscape" if you need -->
    <style>@page { size: A4 }</style>
</head>
<body class="A4">
    <section class="sheet padding-10mm">
        <div class="text-center" style="margin-bottom: 10px;">
            <table class="center" style="width: 80%;">
                <tbody >
                <tr class="odd">
                <td style="text-align: center;"><input name="name" size="10em"></td>
                <td style="text-align: center;"><input name="ancestry" size="10em"></td>
                <!-- <td style="text-align: center;"><input name="exp_rem" size="10em"></td> -->
                <td style="text-align: center;"><input name="level" size="10em"></td>
                </tr>
                <tr class="even">
                <td style="text-align: center;"><span
                style="color: gray">Name</span></td>
                <td style="text-align: center;"><span
                style="color: gray">Ancestry</span></td>
                <!-- <td style="text-align: center;"><span style="color: gray">Unused
                exp</span></td> -->
                <td style="text-align: center;"><span style="color: gray">Level</span></td>
                </tr>
                </tbody>
            </table>
        </div>
        <div style="width: 60%; margin-left: auto; margin-right: auto; padding-bottom: 12px;">
            <div class="text-center">
                <table id="ability-scores">
                    <tr class="centered-input">
                        <td><input type="text" name="might" style="width: 30px;"></td>
                        <td><input type="text" name="agility" style="width: 30px;"></td>
                        <td><input type="text" name="intelligence" style="width: 30px;"></td>
                        <td><input type="text" name="charisma" style="width: 30px;"></td>
                    </tr>
                    <tr>
                        <td class="gray">Might</td>
                        <td class="gray">Agility</td>
                        <td class="gray">Intelligence</td>
                        <td class="gray">Charisma</td>
                    </tr>
                </table>
            </div>
            <div id="damage-thresholds-container" class="text-center">
                <table id="damage-thresholds">
                    <tr class="centered-input">
                        <td style="width: 3.6em;">
                            <div display="flex">
                                <div id="beyond-container" style="position: relative; z-index: 1; font-size: xx-large; margin: 0; padding: 0; padding-top: 8px; margin-top: -5px;">&#9929;
                                    <div style="position: absolute; top: 0; width: 100%; border: 1px;">
                                        <input type="text" style="font-size: medium; z-index: 3; width: 1em; background-color: transparent; border: 0; margin-top: 13px" name="guard">
                                        <!-- <p style=" margin-left: -0.3em; font-size: small;">+5</p> -->
                                    </div>
                                </div>
                            </div>
                        </td>
                        <td style="width: 2em;"><input type="text" name="hit" style="width: 2em;"></td>
                        <td style="width: 2em;"><input type="text" name="heavy" style="width: 2em;"></td>
                        <td style="width: 2em;"><input type="text" name="brutal" style="width: 2em;"></td>
                        <td style="width: 3.6em;">
                            <div>
                                <div id="beyond-container" style="position: relative; font-size: xx-large; margin: 0; padding: 0; padding-top: 2px; margin-bottom: -2px;">‚ü≥
                                    <div style="position: absolute; top: 0; width: 100%;">
                                        <p style=" margin-left: -0.3em; font-size: small;">+5</p>
                                    </div>
                                </div>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td style="border-left: 0;">Guard</td>
                        <td>Hit</td>
                        <td>Heavy</td>
                        <td>Brutal</td>
                        <td style="border-right: 0;">Beyond</td>
                    </tr>
                </table>
                <span class="gray"><strong>Damage Thresholds</strong></span>
            </div>
            <div class="text-center item-header center" style="padding-block: 15px;">
                <table id="damage-table" class="center" style="width: fit-content">
                    <tr id="adrenaline-row" class="centered-input">
                        <td style="width: 60px">Focus</td>
                        <td class="triangles triangles-up"><input type="checkbox" name="sa"><input type="checkbox" name="sb"><input type="checkbox" name="sc"><input type="checkbox" name="sd"><input type="checkbox" name="se"><input type="checkbox" name="sf"><input type="checkbox" name="sg"><input type="checkbox" name="sh"><input type="checkbox" name="si"></td>
                        <td rowspan="2" style="width: 60px"><input type="text" name="bonus" style="width: 35px;"></td>
                    </tr>
                    <tr id="exhaustion-row">
                        <td style="width: 60px">Fatigue</td>
                        <td class="triangles triangles-down"><input type="checkbox" name="sa"><input type="checkbox" name="sb"><input type="checkbox" name="sc"><input type="checkbox" name="sd"><input type="checkbox" name="se"><input type="checkbox" name="sf"><input type="checkbox" name="sg"><input type="checkbox" name="sh"><input type="checkbox" name="si"></td>
                        <!-- <td style="width: 60px">Bonus</td> -->
                    </tr>
                </table>
            </div>
        </div>



        <div class="distributer">
            <div class="minipage-smaller">
                <div class="text-center" style="display: flex; align-items: center; margin-top: -20px; height: 90px; width: 90px; background-color: white;">
                    <div class="text-center item-header" style="margin: auto;">Armor & <br> Resistances</div>
                </div>
            </div>
            <div class="minipage minipage-large">
                
                <table id="weapons">
                    <tr>
                        <td style="width: 8em;">Weapon</td>
                        <td style="width: 5em;">Damage</td>
                        <td style="width: 5em;">Reach</td>
                        <td style="width: auto;">Tags</td>
                    </tr>
                    <tr>
                        <td><div><input type="text" name="wep1"></div></td>
                        <td><div><input type="text" name="wep1_dmg"></div></td>
                        <td><div><input type="text" name="wep1_reach"></div></td>
                        <td><div><input type="text" name="wep1_tags"></div></td>
                    </tr>
                    <tr>
                        <td><div><input type="text" name="wep2"></div></td>
                        <td><div><input type="text" name="wep2_dmg"></div></td>
                        <td><div><input type="text" name="wep2_reach"></div></td>
                        <td><div><input type="text" name="wep2_tags"></div></td>
                    </tr>
                    <tr>
                        <td><div><input type="text" name="wep3"></div></td>
                        <td><div><input type="text" name="wep3_dmg"></div></td>
                        <td><div><input type="text" name="wep3_reach"></div></td>
                        <td><div><input type="text" name="wep3_tags"></div></td>
                    </tr>
                </table>
            </div>

            <div class="minipage minipage-smaller" style="margin-top: -60px;">
                <div class="stances" style="width: fit-content;">
                    <table id="stance-table">
                        <tr>
                            <td>Attacking</td>
                        </tr>
                        <tr>
                            <td >
                                <hr>
                            </td>
                        </tr>
                        <tr>
                            <td>Defending</td>
                        </tr>
                        <tr>
                            <td>
                                <hr>
                            </td>
                        </tr>
                        <tr>
                            <td>Controlling</td>
                        </tr>
                    </table>
                </div>
            </div>
            
            <span style="width: 100%; display: inline-block;"></span>
        </div>

        <div style="clear: both;"></div>

        <div class="distributer">
            <div id="scars-minipage" class="minipage minipage-small">
                <div id="scars" class="text-center item-header" style="padding-top: 5px;">Scars</div>
                <table id="scars-table" class="list-table wide-input">
                    <tr>
                        <td><input type="text" name="scar1"></td>
                    </tr>
                    <tr>
                        <td><input type="text" name="scar2"></td>
                    </tr>
                    <tr>
                        <td><input type="text" name="scar3"></td>
                    </tr>
                    <tr>
                        <td><input type="text" name="scar4"></td>
                    </tr>
                    <tr>
                        <td><input type="text" name="scar5"></td>
                    </tr>
                    <tr>
                        <td><input type="text" name="scar6"></td>
                    </tr>
                </table>
            </div>
            <div id="strain-minipage">
                <div class="text-center" style="width: 100%;">
                    <span style="margin-inline: auto;">Strain</span>
                </div>
                <div style="display: flex; align-items: center;">
                    <svg width="200" height="200" viewBox="0 0 200 200">
            </svg>
                    <div class="text-center center" style="position: relative; top: -50%; left: -50%; width: 0; display: flex; justify-content: center; align-items: center;">
                        <span class="text-center"">Pressure<br>Die</span>
                    </div>
                </div>
            </div>
            <div id="titles-minipage" class="minipage minipage-small">
                <div id="titles" class="text-center item-header" style="padding-top: 5px;">Titles</div>
                <table id="title-table" class="list-table wide-input">
                    <tr>
                        <td><input type="text" name="exp1"></td>
                        <td><input type="text" name="exp_mod1"></td>
                    </tr>
                    <tr>
                        <td><input type="text" name="exp2"></td>
                        <td><input type="text" name="exp_mod2"></td>
                    </tr>
                    <tr>
                        <td><input type="text" name="exp3"></td>
                        <td><input type="text" name="exp_mod3"></td>
                    </tr>
                    <tr>
                        <td><input type="text" name="exp4"></td>
                        <td><input type="text" name="exp_mod4"></td>
                    </tr>
                    <tr>
                        <td><input type="text" name="exp5"></td>
                        <td><input type="text" name="exp_mod5"></td>
                    </tr>
                    <tr>
                        <td><input type="text" name="exp6"></td>
                        <td><input type="text" name="exp_mod6"></td>
                    </tr>
                </table>
            </div>
            <span style="width: 100%; display: inline-block;"></span>
        </div>

        <div class="distributer">
            <div class="minipage minipage-small">
                <div id="coin-pouch">
                    <div class="text-center item-header" style="padding-top: 5px;">Coin Pouch</div>
                    <div class="currency" style="width: fit-content;">
                        <table id="currency-table" class="list-table">
                            <tr>
                                <td><input disabled value="Copper"></input></td>
                                <td><input type="text" name="cc"></td>
                            </tr>
                            <tr>
                                <td><input disabled value="Bronze"></input></td>
                                <td><input type="text" name="bc"></td>
                            </tr>
                            <tr>
                                <td><input disabled value="Silver"></input></td>
                                <td><input type="text" name="sc"></td>
                            </tr>
                            <tr>
                                <td><input disabled value="Gold"></input></td>
                                <td><input type="text" name="gc"></td>
                            </tr>
                            <tr>
                                <td><input disabled value="Platinum"></input></td>
                                <td><input type="text" name="pc" style="border-bottom: 1px solid gray;"></td>
                            </tr>
                        </table>
                    </div>
                </div>
            </div>
            <div class="minipage minipage-medium">
                <div class="text-center item-header" style="padding-top: 5px;">Inventory<span style="font-size: 0.8em;" class="gray"> (5+Might)</span></div>
                <table id="inventory" class="wide-input">
                    <tr>
                        <td><input type="text" name="inv1"></td>
                        <td><input type="text" name="inv2"></td>
                    </tr>
                    <tr>
                        <td><input type="text" name="inv3"></td>
                        <td><input type="text" name="inv4"></td>
                    </tr>
                    <tr>
                        <td><input type="text" name="inv5"></td>
                        <td><input type="text" name="inv6"></td>
                    </tr>
                    <tr>
                        <td><input type="text" name="inv7"></td>
                        <td><input type="text" name="inv8"></td>
                    </tr>
                    <tr>
                        <td><input type="text" name="inv9"></td>
                        <td><input type="text" name="inv10"></td>
                    </tr>
                    <tr>
                        <td><input type="text" name="inv11"></td>
                        <td><input type="text" name="inv12"></td>
                    </tr>
                </table>
            </div>
            <div class="minipage minipage-small">
                <div class="text-center item-header" style="padding-bottom: 25px; padding-top: 5px;">Pocket</div>
                <!-- <hr style="width: 8em;"> -->
                <div class="center" style="width: fit-content;">
                    <textarea id="limitedTextarea" rows="5" cols="18" oninput="enforceMaxLines(this)"></textarea>
                </div>
            </div>
            <span style="width: 100%; display: inline-block;"></span>
        </div>

        <div style="clear: both;"></div>

        <div class="distributer">
            <div id="languages-minipage" class="minipage minipage-small" style="margin-left: 0px">
                <div id="languages" class="text-center item-header" style="padding-top: 5px;">Languages</div>
                <table id="languages-table" class="list-table wide-input">
                    <tr>
                        <td><input type="text" name="lang1"></td>
                    </tr>
                    <tr>
                        <td><input type="text" name="lang2"></td>
                    </tr>
                    <tr>
                        <td><input type="text" name="lang3"></td>
                    </tr>
                    <tr>
                        <td><input type="text" name="lang4"></td>
                    </tr>
                    <tr>
                        <td><input type="text" name="lang5"></td>
                    </tr>
                    <tr>
                        <td><input type="text" name="lang6"></td>
                    </tr>
                </table>
            </div>
            <!-- <div class="minipage minipage-large">
                <div class="text-center item-header" style="padding-top: 5px;">Abilities</div>
                <table id="abilities" class="list-table wide-input" >
                    <tr>
                        <td><input type="text" name="inv1"></td>
                        <td><input type="text" name="inv2"></td>
                        <td><input type="text" name="inv2"></td>
                    </tr>
                    <tr>
                        <td><input type="text" name="inv3"></td>
                        <td><input type="text" name="inv4"></td>
                        <td><input type="text" name="inv2"></td>
                    </tr>
                    <tr>
                        <td><input type="text" name="inv5"></td>
                        <td><input type="text" name="inv6"></td>
                        <td><input type="text" name="inv2"></td>
                    </tr>
                    <tr>
                        <td><input type="text" name="inv7"></td>
                        <td><input type="text" name="inv8"></td>
                        <td><input type="text" name="inv2"></td>
                    </tr>
                    <tr>
                        <td><input type="text" name="inv9"></td>
                        <td><input type="text" name="inv10"></td>
                        <td><input type="text" name="inv2"></td>
                    </tr>
                    <tr>
                        <td><input type="text" name="inv11"></td>
                        <td><input type="text" name="inv12"></td>
                        <td><input type="text" name="inv2"></td>
                    </tr>
                </table>
            </div> -->
            <div id="deeds-minipage" class="minipage minipage-small" style="margin-right: 0px;">
                <div id="deeds" class="text-center item-header" style="padding-top: 5px;">Deeds</div>
                <table id="deeds-table" class="list-table wide-input">
                    <tr>
                        <td><input type="text" name="deed1"></td>
                    </tr>
                    <tr>
                        <td><input type="text" name="deed2"></td>
                    </tr>
                    <tr>
                        <td><input type="text" name="deed3"></td>
                    </tr>
                    <tr>
                        <td><input type="text" name="deed4"></td>
                    </tr>
                    <tr>
                        <td><input type="text" name="deed5"></td>
                    </tr>
                    <tr>
                        <td><input type="text" name="deed6"></td>
                    </tr>
                </table>
            </div>
            <span style="width: 100%; display: inline-block;"></span>

        </div>
        
    </section>
    <script>
        localStorage = window['localStorage']
        loadState()
        document.addEventListener('change', function(event) {
            saveChange(event.target);
        }, true);

        function tabOnEnter(event) {
            if(event.keyCode === 13) { event.preventDefault(); this.dispatchEvent(new Event('keydown', { keyCode: 9 })); }
        }

        function enforceMaxLines(textarea) {
            const maxRows = textarea.rows+1;
            const lineHeight = parseInt(window.getComputedStyle(textarea).lineHeight);
            const maxHeight = lineHeight * maxRows;

            if (textarea.scrollHeight > maxHeight) {
                textarea.value = textarea.value.slice(0, textarea.value.length - 1);
            }
        }
        function saveChange(htmlObj) {
            localStorage[htmlObj.name] = htmlObj.value;
        }
        function loadState() {
            for (const [key, val] of Object.entries(localStorage)) {
                document.getElementsByName(key).value = val
            }
        }
    </script>
    <script>
        const centerX = 100, centerY = 100;
        const outerRadius = 90, innerRadius = 70;
        const segments = 12;
        const gapAngle = 2; // Angle for the gap between segments
        const firstAngle = -75; // Modify this to change where the first part is drawn
        const smallRadius = 50;

        function polarToCartesian(r, angleDeg) {
        const rad = (Math.PI / 180) * angleDeg;
        return {
            x: centerX + r * Math.cos(rad),
            y: centerY + r * Math.sin(rad)
        };
        }

        function arcPath(startAngle, endAngle, rOuter, rInner) {
        const startOuter = polarToCartesian(rOuter, startAngle);
        const endOuter = polarToCartesian(rOuter, endAngle);
        const startInner = polarToCartesian(rInner, endAngle);
        const endInner = polarToCartesian(rInner, startAngle);

        return `
            M ${startOuter.x},${startOuter.y}
            A ${rOuter},${rOuter} 0 0 1 ${endOuter.x},${endOuter.y}
            L ${startInner.x},${startInner.y}
            A ${rInner},${rInner} 0 0 0 ${endInner.x},${endInner.y}
            Z
        `;
        }

        let paths = `<circle cx="${centerX}" cy="${centerY}" r="${smallRadius}" stroke="#000" stroke-width="1" fill="white" />\n`;;
        for (let i = 0; i < segments; i++) {
        const baseAngle = firstAngle + i * (360 / segments);
        const startAngle = baseAngle - (15 - gapAngle / 2);
        const endAngle = baseAngle + (15 - gapAngle / 2);
        paths += `<path class="ring-part" name="strain${i+1}" d="${arcPath(startAngle, endAngle, outerRadius, innerRadius)}" />\n`;
        }


        document.querySelector('svg').innerHTML = paths;
    </script>
    <script>
    document.querySelectorAll('.ring-part').forEach(part => {
        part.addEventListener('click', () => {
        part.classList.toggle('active');
        });
    });
    </script>
</body>
</html>