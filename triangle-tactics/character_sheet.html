<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Triangle Tactics Character Sheet</title>

    <!-- Normalize or reset CSS with your favorite library -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/7.0.0/normalize.min.css">

    <!-- Load paper.css for happy printing -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/paper-css/0.4.1/paper.css">
    
    <!-- Load custom styles -->
    <link rel="stylesheet" href="./styles.css">
    
    <!-- Set page size here: A5, A4 or A3 -->
    <!-- Set also "landscape" if you need -->
    <style>@page { size: A4 }</style>
</head>
<body class="A4">
    <!-- <script type="text/javascript">
      var keynum, lines = 1;

      function limitLines(obj, e) {
        // IE
        if(window.event) {
          keynum = e.keyCode;
        // Netscape/Firefox/Opera
        } else if(e.which) {
          keynum = e.which;
        }

        if(keynum == 13) {
          if(lines == obj.rows) {
            return false;
          }else{
            lines++;
          }
        }
      }
      </script> -->
    <section class="sheet padding-10mm">
        <div class="text-center" style="margin-bottom: 10px;">
            <table class="center" style="width: 80%;">
                <tbody >
                <tr class="odd">
                <td style="text-align: center;"><input name="name" size="10em"></td>
                <td style="text-align: center;"><input name="ancestry" size="10em"></td>
                <td style="text-align: center;"><input name="exp_rem" size="10em"></td>
                <td style="text-align: center;"><input name="exp_tot" size="10em"></td>
                </tr>
                <tr class="even">
                <td style="text-align: center;"><span
                style="color: gray">Name</span></td>
                <td style="text-align: center;"><span
                style="color: gray">Ancestry</span></td>
                <td style="text-align: center;"><span style="color: gray">Unused
                exp</span></td>
                <td style="text-align: center;"><span style="color: gray">Total
                exp</span></td>
                </tr>
                </tbody>
            </table>
        </div>

        <div class="minipage minipage-half stats">
            <div class="text-center">
                <table id="ability-scores">
                    <tr >
                        <td><input type="text" name="might" style="width: 30px;"></td>
                        <td><input type="text" name="agility" style="width: 30px;"></td>
                        <td><input type="text" name="intelligence" style="width: 30px;"></td>
                        <td><input type="text" name="charisma" style="width: 30px;"></td>
                    </tr>
                    <tr>
                        <td class="gray">Might</td>
                        <td class="gray">Agility</td>
                        <td class="gray">Intelligence</td>
                        <td class="gray">Charisma</td>
                    </tr>
                </table>
            </div>
            <div id="damage-thresholds-container" class="text-center">
                <table id="damage-thresholds">
                    <tr>
                        <td style="width: 2em;">-5</td>
                        <td style="width: 2em;"><input type="text" name="hit" style="width: 2em;"></td>
                        <td style="width: 2em;"><input type="text" name="heavy" style="width: 2em;"></td>
                        <td style="width: 2em;"><input type="text" name="brutal" style="width: 2em;"></td>
                        <td style="width: 2em;">
                            <div>
                                <div style="font-size: xx-large; margin: 0; padding: 0;">‚ü≥</div>
                                <div style="position: absolute; top: 16px; left: 22px; font-size: smaller;">+5</div>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td>Broken</td>
                        <td>Hit</td>
                        <td>Heavy</td>
                        <td>Brutal</td>
                        <td>Beyond</td>
                    </tr>
                </table>
                <span class="gray"><strong>Damage Thresholds</strong></span>
            </div>
        </div>

        <div class="minipage minipage-half">
            <table style="width: 85%;" id="damage">
                <tr>
                    <td></td>
                    <td style="width: 24%;"><strong>Wounds</strong></td>
                    <td><strong>Scars</strong></td>
                </tr>
                <tr>
                    <td>6</td>
                    <td><input type="checkbox" name="6a"></td>
                    <td><input type="text" name="6s"></td>
                </tr>
                <tr>
                    <td>5</td>
                    <td><input type="checkbox" name="5a"><input type="checkbox" name="5b"></td>
                    <td><input type="text" name="5s"></td>
                </tr>
                <tr>
                    <td>4</td>
                    <td><input type="checkbox" name="4a"><input type="checkbox" name="4b"></td>
                    <td><input type="text" name="4s"></td>
                </tr>
                <tr>
                    <td>3</td>
                    <td><input type="checkbox" name="3a""><input type="checkbox" name="3b"><input type="checkbox" name="3c"></td>
                    <td><input type="text" name="3s"></td>
                </tr>
                <tr>
                    <td>2</td>
                    <td><input type="checkbox" name="2a"><input type="checkbox" name="2b"><input type="checkbox" name="2c"><input type="checkbox" name="2d"></td>
                    <td><input type="text" name="2s"></td>
                </tr>
                <tr>
                    <td>1</td>
                    <td><input type="checkbox" name="1a"><input type="checkbox" name="1b"><input type="checkbox" name="1c"><input type="checkbox" name="1d"><input type="checkbox" name="1e"></td>
                    <td><input type="text" name="1s"></td>
                </tr>
                <tr>
                    <td></td>
                    <td></td>
                    <td></td>
                </tr>
            </table>
        </div>

        <div style="clear: both;"></div>

        <div class="minipage minipage-large">
            <table id="weapons">
                <tr>
                    <td style="width: 8em;">Weapon</td>
                    <td style="width: auto;">Damage</td>
                    <td style="width: auto;">Reach</td>
                    <td style="width: 8em;">Tags</td>
                </tr>
                <tr>
                    <td><div><input type="text" name="wep1"></div></td>
                    <td><div><input type="text" name="wep1_dmg"></div></td>
                    <td><div><input type="text" name="wep1_reach"></div></td>
                    <td><div><input type="text" name="wep1_tags"></div></td>
                </tr>
                <tr>
                    <td><div><input type="text" name="wep2"></div></td>
                    <td><div><input type="text" name="wep2_dmg"></div></td>
                    <td><div><input type="text" name="wep2_reach"></div></td>
                    <td><div><input type="text" name="wep2_tags"></div></td>
                </tr>
                <tr>
                    <td><div><input type="text" name="wep3"></div></td>
                    <td><div><input type="text" name="wep3_dmg"></div></td>
                    <td><div><input type="text" name="wep3_reach"></div></td>
                    <td><div><input type="text" name="wep3_tags"></div></td>
                </tr>
            </table>
        </div>

        <div class="minipage minipage-small">
        <div class="text-center item-header" style="padding-top: 5px;">Experiences</div>
            <table id="experiences">
                <tr>
                    <td><input type="text" name="exp_mod1"></td>
                    <td><input type="text" name="exp1" style="width: 8.5em;"></td>
                </tr>
                <tr>
                    <td><input type="text" name="exp_mod2"></td>
                    <td><input type="text" name="exp2" style="width: 8.5em;"></td>
                </tr>
                <tr>
                    <td><input type="text" name="exp_mod3"></td>
                    <td><input type="text" name="exp3" style="width: 8.5em;"></td>
                </tr>
                <tr>
                    <td><input type="text" name="exp_mod4"></td>
                    <td><input type="text" name="exp4" style="width: 8.5em;"></td>
                </tr>
                <tr>
                    <td><input type="text" name="exp_mod5"></td>
                    <td><input type="text" name="exp5" style="width: 8.5em;"></td>
                </tr>
            </table>
            <hr style="width: 8em;">
            <div class="text-center item-header">Pocket</div>
            <div class="center" style="width: fit-content;">
                <textarea id="limitedTextarea" rows="5" cols="18" oninput="enforceMaxLines(this)"></textarea>
            </div>
        </div>

        <div class="minipage minipage-small">
            <div class="text-center" style="padding-top: 5px;">Inventory <span style="font-size: 0.8em;" class="gray">(5+Might)</span></div>
            <table id="inventory">
                <tr>
                    <td><input type="text" name="inv1"></td>
                </tr>
                <tr>
                    <td><input type="text" name="inv2"></td>
                </tr>
                <tr>
                    <td><input type="text" name="inv3"></td>
                </tr>
                <tr>
                    <td><input type="text" name="inv4"></td>
                </tr>
                <tr>
                    <td><input type="text" name="inv5"></td>
                </tr>
                <tr>
                    <td><input type="text" name="inv6"></td>
                </tr>
                <tr>
                    <td><input type="text" name="inv7"></td>
                </tr>
                <tr>
                    <td><input type="text" name="inv8"></td>
                </tr>
                <tr>
                    <td><input type="text" name="inv9"></td>
                </tr>
                <tr>
                    <td><input type="text" name="inv10"></td>
                </tr>
            </table>
        </div>
        <div style="width: 30%;">
            <span style="width: 100%;">Notes to Self</span>
            <textarea disabled style="resize: none; height: 15em; width: 50em;">
armor?
    Works as DT modifier, but could be fun with more active role
guard break?
    On filled wound bar?
Weakness as experience/title?
    Using weakness on roll gives advantage later?
Scars as titles?
    Also make some example scars
            </textarea>
        </div>
    </section>
    <script>
        localStorage = window['localStorage']
        loadState()

        function enforceMaxLines(textarea) {
            const maxRows = textarea.rows+1;
            const lineHeight = parseInt(window.getComputedStyle(textarea).lineHeight);
            const maxHeight = lineHeight * maxRows;

            if (textarea.scrollHeight > maxHeight) {
                textarea.value = textarea.value.slice(0, textarea.value.length - 1);
            }
        }
        function saveChange(htmlObj) {
            localStorage[htmlObj.name] = htmlObj.value
        }
        function loadState() {
            for (const [key, val] of Object.entries(localStorage)) {
                document.getElementsByName(key).value = val
            }
        }
    </script>
</body>
</html>
