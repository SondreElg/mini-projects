<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Triangle Tactics Character Sheet</title>

    <!-- Normalize or reset CSS with your favorite library -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/7.0.0/normalize.min.css">

    <!-- Load paper.css for happy printing -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/paper-css/0.4.1/paper.css">
    
    <!-- Load custom styles -->
    <link rel="stylesheet" href="./styles.css">
    
    <!-- Set page size here: A5, A4 or A3 -->
    <!-- Set also "landscape" if you need -->
    <style>@page { size: A4 }</style>
</head>
<body class="A4">
    <section class="sheet padding-10mm">
        <div class="text-center" style="margin-bottom: 10px;">
            <table class="center" style="width: 80%;">
                <tbody >
                <tr class="odd">
                <td style="text-align: center;"><input name="name" size="10em"></td>
                <td style="text-align: center;"><input name="ancestry" size="10em"></td>
                <!-- <td style="text-align: center;"><input name="exp_rem" size="10em"></td> -->
                <td style="text-align: center;"><input name="level" size="10em"></td>
                </tr>
                <tr class="even">
                <td style="text-align: center;"><span
                style="color: gray">Name</span></td>
                <td style="text-align: center;"><span
                style="color: gray">Ancestry</span></td>
                <!-- <td style="text-align: center;"><span style="color: gray">Unused
                exp</span></td> -->
                <td style="text-align: center;"><span style="color: gray">Level</span></td>
                </tr>
                </tbody>
            </table>
        </div>
        <div style="width: 60%; margin-left: auto; margin-right: auto; padding-bottom: 12px;">
            <div class="text-center">
                <table id="ability-scores">
                    <tr >
                        <td><input type="text" name="might" style="width: 30px;"></td>
                        <td><input type="text" name="agility" style="width: 30px;"></td>
                        <td><input type="text" name="intelligence" style="width: 30px;"></td>
                        <td><input type="text" name="charisma" style="width: 30px;"></td>
                    </tr>
                    <tr>
                        <td class="gray">Might</td>
                        <td class="gray">Agility</td>
                        <td class="gray">Intelligence</td>
                        <td class="gray">Charisma</td>
                    </tr>
                </table>
            </div>
            <div id="damage-thresholds-container" class="text-center">
                <table id="damage-thresholds">
                    <tr>
                        <td style="width: 3.6em;">
                            <div display="flex">
                                <div id="beyond-container" style="position: relative; z-index: 1; font-size: xx-large; margin: 0; padding: 0; padding-top: 8px; margin-top: -5px;">&#9929;
                                    <div style="position: absolute; top: 0; width: 100%; border: 1px;">
                                        <input type="text" style="font-size: medium; z-index: 3; width: 1em; background-color: transparent; border: 0; margin-top: 13px" name="pdr">
                                        <!-- <p style=" margin-left: -0.3em; font-size: small;">+5</p> -->
                                    </div>
                                </div>
                            </div>
                        </td>
                        <td style="width: 2em;"><input type="text" name="hit" style="width: 2em;"></td>
                        <td style="width: 2em;"><input type="text" name="heavy" style="width: 2em;"></td>
                        <td style="width: 2em;"><input type="text" name="brutal" style="width: 2em;"></td>
                        <td style="width: 3.6em;">
                            <div>
                                <div id="beyond-container" style="position: relative; font-size: xx-large; margin: 0; padding: 0; padding-top: 2px; margin-bottom: -2px;">‚ü≥
                                    <div style="position: absolute; top: 0; width: 100%;">
                                        <p style=" margin-left: -0.3em; font-size: small;">+5</p>
                                    </div>
                                </div>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td style="border-left: 0;">PDR</td>
                        <td>Hit</td>
                        <td>Heavy</td>
                        <td>Brutal</td>
                        <td style="border-right: 0;">Beyond</td>
                    </tr>
                </table>
                <span class="gray"><strong>Damage Thresholds</strong></span>
            </div>
        </div>


        <div class="distributer">
            <div class="minipage minipage-smaller">
                <div class="stances" style="width: fit-content;">
                    <table id="stance-table">
                        <tr>
                            <td>Attacking</td>
                        </tr>
                        <tr>
                            <td >
                                <hr>
                            </td>
                        </tr>
                        <tr>
                            <td>Defending</td>
                        </tr>
                        <tr>
                            <td>
                                <hr>
                            </td>
                        </tr>
                        <tr>
                            <td>Controlling</td>
                        </tr>
                    </table>
                </div>
            </div>
    
            <div class="minipage minipage-large">
                <table id="weapons">
                    <tr>
                        <td style="width: 8em;">Weapon</td>
                        <td style="width: 5em;">Damage</td>
                        <td style="width: 5em;">Reach</td>
                        <td style="width: auto;">Tags</td>
                    </tr>
                    <tr>
                        <td><div><input type="text" name="wep1"></div></td>
                        <td><div><input type="text" name="wep1_dmg"></div></td>
                        <td><div><input type="text" name="wep1_reach"></div></td>
                        <td><div><input type="text" name="wep1_tags"></div></td>
                    </tr>
                    <tr>
                        <td><div><input type="text" name="wep2"></div></td>
                        <td><div><input type="text" name="wep2_dmg"></div></td>
                        <td><div><input type="text" name="wep2_reach"></div></td>
                        <td><div><input type="text" name="wep2_tags"></div></td>
                    </tr>
                    <tr>
                        <td><div><input type="text" name="wep3"></div></td>
                        <td><div><input type="text" name="wep3_dmg"></div></td>
                        <td><div><input type="text" name="wep3_reach"></div></td>
                        <td><div><input type="text" name="wep3_tags"></div></td>
                    </tr>
                </table>
            </div>
            <div class="minipage minipage-small">
                <table  id="damage">
                    <tr>
                        <td></td>
                        <td style="width: 70px;"><strong>Wounds</strong></td>
                        <td><strong>Scars</strong></td>
                    </tr>
                    <!-- <tr>
                        <td>6</td>
                        <td><input type="checkbox" name="6a"></td>
                        <td><input type="text" name="6s"></td>
                    </tr> -->
                    <tr>
                        <td>5</td>
                        <td><input type="checkbox" name="5a">
                            <!-- <input type="checkbox" name="5b"> -->
                        </td>
                        <td><input type="text" name="5s"></td>
                    </tr>
                    <tr>
                        <td>4</td>
                        <td><input type="checkbox" name="4a"><input type="checkbox" name="4b"></td>
                        <td><input type="text" name="4s"></td>
                    </tr>
                    <tr>
                        <td>3</td>
                        <td><input type="checkbox" name="3a""><input type="checkbox" name="3b"><input type="checkbox" name="3c"></td>
                        <td><input type="text" name="3s"></td>
                    </tr>
                    <tr>
                        <td>2</td>
                        <td><input type="checkbox" name="2a"><input type="checkbox" name="2b"><input type="checkbox" name="2c"><input type="checkbox" name="2d"></td>
                        <td><input type="text" name="2s"></td>
                    </tr>
                    <tr>
                        <td>1</td>
                        <td><input type="checkbox" name="1a"><input type="checkbox" name="1b"><input type="checkbox" name="1c"><input type="checkbox" name="1d"></td>
                        <td><input type="text" name="1s"></td>
                    </tr>
                    <tr>
                        <td></td>
                        <td colspan="2"><input type="checkbox" name="sa"><input type="checkbox" name="sb"><input type="checkbox" name="sc"><input type="checkbox" name="sd"><input type="checkbox" name="se"><input type="checkbox" name="sf"><input type="checkbox" name="sg"><input type="checkbox" name="sh"><input type="checkbox" name="si"></td>
                    </tr>
                    <tr>
                        <td></td>
                        <td><strong>Strain</strong></td>
                        <td><input type="text" name="strain" style="width: 10px;"> / <input type="text" name="strain_max" style="width: 10px;"></td>
                    </tr>
                </table>
            </div>
            <span style="width: 100%; display: inline-block;"></span>
        </div>

        <div style="clear: both;"></div>

        <div class="distributer">
            <div class="minipage">
                <div id="coin-pouch">
                    <div class="text-center item-header" style="padding-top: 5px;">Coin Pouch</div>
                    <div class="currency" style="width: fit-content;">
                        <table id="currency-table" class="list-table">
                            <tr>
                                <td><input disabled value="Copper"></input></td>
                                <td><input type="text" name="cc"></td>
                            </tr>
                            <tr>
                                <td><input disabled value="Bronze"></input></td>
                                <td><input type="text" name="bc"></td>
                            </tr>
                            <tr>
                                <td><input disabled value="Silver"></input></td>
                                <td><input type="text" name="sc"></td>
                            </tr>
                            <tr>
                                <td><input disabled value="Gold"></input></td>
                                <td><input type="text" name="gc"></td>
                            </tr>
                            <tr>
                                <td><input disabled value="Platinum"></input></td>
                                <td><input type="text" name="pc" style="border-bottom: 1px solid gray;"></td>
                            </tr>
                        </table>
                    </div>
                </div>
            </div>
            <div class="minipage minipage-medium">
                <div class="text-center item-header" style="padding-top: 5px;">Inventory<span style="font-size: 0.8em;" class="gray"> (5+Might)</span></div>
                <table id="inventory">
                    <tr>
                        <td><input type="text" name="inv1"></td>
                        <td><input type="text" name="inv2"></td>
                    </tr>
                    <tr>
                        <td><input type="text" name="inv3"></td>
                        <td><input type="text" name="inv4"></td>
                    </tr>
                    <tr>
                        <td><input type="text" name="inv5"></td>
                        <td><input type="text" name="inv6"></td>
                    </tr>
                    <tr>
                        <td><input type="text" name="inv7"></td>
                        <td><input type="text" name="inv8"></td>
                    </tr>
                    <tr>
                        <td><input type="text" name="inv9"></td>
                        <td><input type="text" name="inv10"></td>
                    </tr>
                    <tr>
                        <td><input type="text" name="inv11"></td>
                        <td><input type="text" name="inv12"></td>
                    </tr>
                </table>
            </div>
            <div class="minipage">
                <div class="text-center item-header" style="padding-bottom: 25px; padding-top: 5px;">Pocket</div>
                <!-- <hr style="width: 8em;"> -->
                <div class="center" style="width: fit-content;">
                    <textarea id="limitedTextarea" rows="5" cols="18" oninput="enforceMaxLines(this)"></textarea>
                </div>
            </div>
            <span style="width: 100%; display: inline-block;"></span>
            <br/>
            <div id="titles-minipage" class="minipage minipage-small">
                <div id="titles" class="text-center item-header" style="padding-top: 5px;">Titles</div>
                <table id="title-table" class="list-table">
                    <tr>
                        <td><input type="text" name="exp1"></td>
                        <td><input type="text" name="exp_mod1"></td>
                    </tr>
                    <tr>
                        <td><input type="text" name="exp2"></td>
                        <td><input type="text" name="exp_mod2"></td>
                    </tr>
                    <tr>
                        <td><input type="text" name="exp3"></td>
                        <td><input type="text" name="exp_mod3"></td>
                    </tr>
                    <tr>
                        <td><input type="text" name="exp4"></td>
                        <td><input type="text" name="exp_mod4"></td>
                    </tr>
                    <tr>
                        <td><input type="text" name="exp5"></td>
                        <td><input type="text" name="exp_mod5"></td>
                    </tr>
                    <tr>
                        <td><input type="text" name="exp6"></td>
                        <td><input type="text" name="exp_mod6"></td>
                    </tr>
                </table>
            </div>
            <div id="damage-table" class="minipage minipage-medium">
                <div class="text-center item-header center" style="padding-top: 5px;">Damage</div>

                <table id="damage-table" class="center">
                    <tr id="adrenaline-row">
                        <td>Focus</td>
                        <td class="triangles triangles-up"><input type="checkbox" name="sa"><input type="checkbox" name="sb"><input type="checkbox" name="sc"><input type="checkbox" name="sd"><input type="checkbox" name="se"><input type="checkbox" name="sf"><input type="checkbox" name="sg"><input type="checkbox" name="sh"><input type="checkbox" name="si"></td>
                    </tr>
                    <tr id="exhaustion-row">
                        <td>Fatigue</td>
                        <td class="triangles triangles-down"><input type="checkbox" name="sa"><input type="checkbox" name="sb"><input type="checkbox" name="sc"><input type="checkbox" name="sd"><input type="checkbox" name="se"><input type="checkbox" name="sf"><input type="checkbox" name="sg"><input type="checkbox" name="sh"><input type="checkbox" name="si"></td>
                    </tr>
                </table>
            </div>
            <div id="deeds-minipage" class="minipage minipage-small">
                <div id="deeds" class="text-center item-header" style="padding-top: 5px;">Deeds</div>
                <table id="deeds-table" class="list-table">
                    <tr>
                        <td><input type="text" name="deed1"></td>
                    </tr>
                    <tr>
                        <td><input type="text" name="deed2"></td>
                    </tr>
                    <tr>
                        <td><input type="text" name="deed3"></td>
                    </tr>
                    <tr>
                        <td><input type="text" name="deed4"></td>
                    </tr>
                    <tr>
                        <td><input type="text" name="deed5"></td>
                    </tr>
                    <tr>
                        <td><input type="text" name="deed6"></td>
                    </tr>
                </table>
            </div>
            <span style="width: 100%; display: inline-block;"></span>
        </div>

        <div style="clear: both;"></div>

        <div class="center">

        </div>

        <div style="width: 30%;">
            <span style="width: 100%;">Notes to Self</span>
            <textarea disabled style="resize: none; height: 15em; width: 50em;">
armor?
    Works as DT modifier, but could be fun with more active role
guard break?
    On filled wound bar?
Weaknesses as titles?
    Using weakness on roll gives advantage later?
Scars as titles?
    Also make some example scars
Speed
            </textarea>
        </div>
    </section>
    <script>
        localStorage = window['localStorage']
        loadState()
        document.addEventListener('change', function(event) {
            saveChange(event.target);
        }, true);

        function tabOnEnter(event) {
            if(event.keyCode === 13) { event.preventDefault(); this.dispatchEvent(new Event('keydown', { keyCode: 9 })); }
        }

        function enforceMaxLines(textarea) {
            const maxRows = textarea.rows+1;
            const lineHeight = parseInt(window.getComputedStyle(textarea).lineHeight);
            const maxHeight = lineHeight * maxRows;

            if (textarea.scrollHeight > maxHeight) {
                textarea.value = textarea.value.slice(0, textarea.value.length - 1);
            }
        }
        function saveChange(htmlObj) {
            localStorage[htmlObj.name] = htmlObj.value;
        }
        function loadState() {
            for (const [key, val] of Object.entries(localStorage)) {
                document.getElementsByName(key).value = val
            }
        }
    </script>
</body>
</html>